(function(){var n,e,o,t,i,r,d,a,c,l;e=window.device,n={},window.device=n,t=window.document.documentElement,l=window.navigator.userAgent.toLowerCase(),n.ios=function(){return n.iphone()||n.ipod()||n.ipad()},n.iphone=function(){return!n.windows()&&i("iphone")},n.ipod=function(){return i("ipod")},n.ipad=function(){return i("ipad")},n.android=function(){return!n.windows()&&i("android")},n.androidPhone=function(){return n.android()&&i("mobile")},n.androidTablet=function(){return n.android()&&!i("mobile")},n.blackberry=function(){return i("blackberry")||i("bb10")||i("rim")},n.blackberryPhone=function(){return n.blackberry()&&!i("tablet")},n.blackberryTablet=function(){return n.blackberry()&&i("tablet")},n.windows=function(){return i("windows")},n.windowsPhone=function(){return n.windows()&&i("phone")},n.windowsTablet=function(){return n.windows()&&i("touch")&&!n.windowsPhone()},n.fxos=function(){return(i("(mobile;")||i("(tablet;"))&&i("; rv:")},n.fxosPhone=function(){return n.fxos()&&i("mobile")},n.fxosTablet=function(){return n.fxos()&&i("tablet")},n.meego=function(){return i("meego")},n.cordova=function(){return window.cordova&&"file:"===location.protocol},n.nodeWebkit=function(){return"object"==typeof window.process},n.mobile=function(){return n.androidPhone()||n.iphone()||n.ipod()||n.windowsPhone()||n.blackberryPhone()||n.fxosPhone()||n.meego()},n.tablet=function(){return n.ipad()||n.androidTablet()||n.blackberryTablet()||n.windowsTablet()||n.fxosTablet()},n.desktop=function(){return!n.tablet()&&!n.mobile()},n.television=function(){var n;for(television=["googletv","viera","smarttv","internet.tv","netcast","nettv","appletv","boxee","kylo","roku","dlnadoc","roku","pov_tv","hbbtv","ce-html"],n=0;n<television.length;){if(i(television[n]))return!0;n++}return!1},n.portrait=function(){return window.innerHeight/window.innerWidth>1},n.landscape=function(){return window.innerHeight/window.innerWidth<1},n.noConflict=function(){return window.device=e,this},i=function(n){return l.indexOf(n)!==-1},d=function(n){var e;return e=new RegExp(n,"i"),t.className.match(e)},o=function(n){var e=null;d(n)||(e=t.className.replace(/^\s+|\s+$/g,""),t.className=e+" "+n)},c=function(n){d(n)&&(t.className=t.className.replace(" "+n,""))},n.ios()?n.ipad()?o("ios ipad tablet"):n.iphone()?o("ios iphone mobile"):n.ipod()&&o("ios ipod mobile"):n.android()?o(n.androidTablet()?"android tablet":"android mobile"):n.blackberry()?o(n.blackberryTablet()?"blackberry tablet":"blackberry mobile"):n.windows()?o(n.windowsTablet()?"windows tablet":n.windowsPhone()?"windows mobile":"desktop"):n.fxos()?o(n.fxosTablet()?"fxos tablet":"fxos mobile"):n.meego()?o("meego mobile"):n.nodeWebkit()?o("node-webkit"):n.television()?o("television"):n.desktop()&&o("desktop"),n.cordova()&&o("cordova"),r=function(){n.landscape()?(c("portrait"),o("landscape")):(c("landscape"),o("portrait"))},a=Object.prototype.hasOwnProperty.call(window,"onorientationchange")?"orientationchange":"resize",window.addEventListener?window.addEventListener(a,r,!1):window.attachEvent?window.attachEvent(a,r):window[a]=r,r(),"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return n}):"undefined"!=typeof module&&module.exports?module.exports=n:window.device=n}).call(this);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRldmljZS5qcyJdLCJuYW1lcyI6WyJkZXZpY2UiLCJwcmV2aW91c0RldmljZSIsImFkZENsYXNzIiwiZG9jdW1lbnRFbGVtZW50IiwiZmluZCIsImhhbmRsZU9yaWVudGF0aW9uIiwiaGFzQ2xhc3MiLCJvcmllbnRhdGlvbkV2ZW50IiwicmVtb3ZlQ2xhc3MiLCJ1c2VyQWdlbnQiLCJ3aW5kb3ciLCJkb2N1bWVudCIsIm5hdmlnYXRvciIsInRvTG93ZXJDYXNlIiwiaW9zIiwiaXBob25lIiwiaXBvZCIsImlwYWQiLCJ3aW5kb3dzIiwiYW5kcm9pZCIsImFuZHJvaWRQaG9uZSIsImFuZHJvaWRUYWJsZXQiLCJibGFja2JlcnJ5IiwiYmxhY2tiZXJyeVBob25lIiwiYmxhY2tiZXJyeVRhYmxldCIsIndpbmRvd3NQaG9uZSIsIndpbmRvd3NUYWJsZXQiLCJmeG9zIiwiZnhvc1Bob25lIiwiZnhvc1RhYmxldCIsIm1lZWdvIiwiY29yZG92YSIsImxvY2F0aW9uIiwicHJvdG9jb2wiLCJub2RlV2Via2l0IiwicHJvY2VzcyIsIm1vYmlsZSIsInRhYmxldCIsImRlc2t0b3AiLCJ0ZWxldmlzaW9uIiwiaSIsImxlbmd0aCIsInBvcnRyYWl0IiwiaW5uZXJIZWlnaHQiLCJpbm5lcldpZHRoIiwibGFuZHNjYXBlIiwibm9Db25mbGljdCIsInRoaXMiLCJuZWVkbGUiLCJpbmRleE9mIiwiY2xhc3NOYW1lIiwicmVnZXgiLCJSZWdFeHAiLCJtYXRjaCIsImN1cnJlbnRDbGFzc05hbWVzIiwicmVwbGFjZSIsIk9iamVjdCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImFkZEV2ZW50TGlzdGVuZXIiLCJhdHRhY2hFdmVudCIsImRlZmluZSIsImFtZCIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJDQU1BLFdBRUUsR0FBSUEsR0FDRkMsRUFDQUMsRUFDQUMsRUFDQUMsRUFDQUMsRUFDQUMsRUFDQUMsRUFDQUMsRUFDQUMsQ0FHRlIsR0FB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T0gsR0FBb0JGLEVBRzdCQSxJQUVzQixrQkFBWHlELFNBQStDLGdCQUFmQSxRQUFPQyxLQUFvQkQsT0FBT0MsSUFDM0VELE9BQU8sV0FDTCxNQUFPOUQsS0FFa0IsbUJBQVhnRSxTQUEwQkEsT0FBT0MsUUFDakRELE9BQU9DLFFBQVVqRSxFQUVqQlUsT0FBT1YsT0FBU0EsSUFHakIyRCxLQUFLWiIsImZpbGUiOiJkZXZpY2UuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBEZXZpY2UuanNcbi8vIChjKSAyMDE0IE1hdHRoZXcgSHVkc29uXG4vLyBEZXZpY2UuanMgaXMgZnJlZWx5IGRpc3RyaWJ1dGFibGUgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuLy8gRm9yIGFsbCBkZXRhaWxzIGFuZCBkb2N1bWVudGF0aW9uOlxuLy8gaHR0cDovL21hdHRoZXdodWRzb24ubWUvcHJvamVjdHMvZGV2aWNlLmpzL1xuXG4oZnVuY3Rpb24oKSB7XG5cbiAgdmFyIGRldmljZSxcbiAgICBwcmV2aW91c0RldmljZSxcbiAgICBhZGRDbGFzcyxcbiAgICBkb2N1bWVudEVsZW1lbnQsXG4gICAgZmluZCxcbiAgICBoYW5kbGVPcmllbnRhdGlvbixcbiAgICBoYXNDbGFzcyxcbiAgICBvcmllbnRhdGlvbkV2ZW50LFxuICAgIHJlbW92ZUNsYXNzLFxuICAgIHVzZXJBZ2VudDtcblxuICAvLyBTYXZlIHRoZSBwcmV2aW91cyB2YWx1ZSBvZiB0aGUgZGV2aWNlIHZhcmlhYmxlLlxuICBwcmV2aW91c0RldmljZSA9IHdpbmRvdy5kZXZpY2U7XG5cbiAgZGV2aWNlID0ge307XG5cbiAgLy8gQWRkIGRldmljZSBhcyBhIGdsb2JhbCBvYmplY3QuXG4gIHdpbmRvdy5kZXZpY2UgPSBkZXZpY2U7XG5cbiAgLy8gVGhlIDxodG1sPiBlbGVtZW50LlxuICBkb2N1bWVudEVsZW1lbnQgPSB3aW5kb3cuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xuXG4gIC8vIFRoZSBjbGllbnQgdXNlciBhZ2VudCBzdHJpbmcuXG4gIC8vIExvd2VyY2FzZSwgc28gd2UgY2FuIHVzZSB0aGUgbW9yZSBlZmZpY2llbnQgaW5kZXhPZigpLCBpbnN0ZWFkIG9mIFJlZ2V4XG4gIHVzZXJBZ2VudCA9IHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCk7XG5cbiAgLy8gTWFpbiBmdW5jdGlvbnNcbiAgLy8gLS0tLS0tLS0tLS0tLS1cblxuICBkZXZpY2UuaW9zID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBkZXZpY2UuaXBob25lKCkgfHwgZGV2aWNlLmlwb2QoKSB8fCBkZXZpY2UuaXBhZCgpO1xuICB9O1xuXG4gIGRldmljZS5pcGhvbmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuICFkZXZpY2Uud2luZG93cygpICYmIGZpbmQoJ2lwaG9uZScpO1xuICB9O1xuXG4gIGRldmljZS5pcG9kID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBmaW5kKCdpcG9kJyk7XG4gIH07XG5cbiAgZGV2aWNlLmlwYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGZpbmQoJ2lwYWQnKTtcbiAgfTtcblxuICBkZXZpY2UuYW5kcm9pZCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gIWRldmljZS53aW5kb3dzKCkgJiYgZmluZCgnYW5kcm9pZCcpO1xuICB9O1xuXG4gIGRldmljZS5hbmRyb2lkUGhvbmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGRldmljZS5hbmRyb2lkKCkgJiYgZmluZCgnbW9iaWxlJyk7XG4gIH07XG5cbiAgZGV2aWNlLmFuZHJvaWRUYWJsZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGRldmljZS5hbmRyb2lkKCkgJiYgIWZpbmQoJ21vYmlsZScpO1xuICB9O1xuXG4gIGRldmljZS5ibGFja2JlcnJ5ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBmaW5kKCdibGFja2JlcnJ5JykgfHwgZmluZCgnYmIxMCcpIHx8IGZpbmQoJ3JpbScpO1xuICB9O1xuXG4gIGRldmljZS5ibGFja2JlcnJ5UGhvbmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGRldmljZS5ibGFja2JlcnJ5KCkgJiYgIWZpbmQoJ3RhYmxldCcpO1xuICB9O1xuXG4gIGRldmljZS5ibGFja2JlcnJ5VGFibGV0ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBkZXZpY2UuYmxhY2tiZXJyeSgpICYmIGZpbmQoJ3RhYmxldCcpO1xuICB9O1xuXG4gIGRldmljZS53aW5kb3dzID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBmaW5kKCd3aW5kb3dzJyk7XG4gIH07XG5cbiAgZGV2aWNlLndpbmRvd3NQaG9uZSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gZGV2aWNlLndpbmRvd3MoKSAmJiBmaW5kKCdwaG9uZScpO1xuICB9O1xuXG4gIGRldmljZS53aW5kb3dzVGFibGV0ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBkZXZpY2Uud2luZG93cygpICYmIChmaW5kKCd0b3VjaCcpICYmICFkZXZpY2Uud2luZG93c1Bob25lKCkpO1xuICB9O1xuXG4gIGRldmljZS5meG9zID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAoZmluZCgnKG1vYmlsZTsnKSB8fCBmaW5kKCcodGFibGV0OycpKSAmJiBmaW5kKCc7IHJ2OicpO1xuICB9O1xuXG4gIGRldmljZS5meG9zUGhvbmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGRldmljZS5meG9zKCkgJiYgZmluZCgnbW9iaWxlJyk7XG4gIH07XG5cbiAgZGV2aWNlLmZ4b3NUYWJsZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGRldmljZS5meG9zKCkgJiYgZmluZCgndGFibGV0Jyk7XG4gIH07XG5cbiAgZGV2aWNlLm1lZWdvID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBmaW5kKCdtZWVnbycpO1xuICB9O1xuXG4gIGRldmljZS5jb3Jkb3ZhID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB3aW5kb3cuY29yZG92YSAmJiBsb2NhdGlvbi5wcm90b2NvbCA9PT0gJ2ZpbGU6JztcbiAgfTtcblxuICBkZXZpY2Uubm9kZVdlYmtpdCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdHlwZW9mIHdpbmRvdy5wcm9jZXNzID09PSAnb2JqZWN0JztcbiAgfTtcblxuICBkZXZpY2UubW9iaWxlID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBkZXZpY2UuYW5kcm9pZFBob25lKCkgfHwgZGV2aWNlLmlwaG9uZSgpIHx8IGRldmljZS5pcG9kKCkgfHwgZGV2aWNlLndpbmRvd3NQaG9uZSgpIHx8IGRldmljZS5ibGFja2JlcnJ5UGhvbmUoKSB8fCBkZXZpY2UuZnhvc1Bob25lKCkgfHwgZGV2aWNlLm1lZWdvKCk7XG4gIH07XG5cbiAgZGV2aWNlLnRhYmxldCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gZGV2aWNlLmlwYWQoKSB8fCBkZXZpY2UuYW5kcm9pZFRhYmxldCgpIHx8IGRldmljZS5ibGFja2JlcnJ5VGFibGV0KCkgfHwgZGV2aWNlLndpbmRvd3NUYWJsZXQoKSB8fCBkZXZpY2UuZnhvc1RhYmxldCgpO1xuICB9O1xuXG4gIGRldmljZS5kZXNrdG9wID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAhZGV2aWNlLnRhYmxldCgpICYmICFkZXZpY2UubW9iaWxlKCk7XG4gIH07XG5cbiAgZGV2aWNlLnRlbGV2aXNpb24gPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgaSwgdHZTdHJpbmc7XG5cbiAgICB0ZWxldmlzaW9uID0gW1xuICAgICAgXCJnb29nbGV0dlwiLFxuICAgICAgXCJ2aWVyYVwiLFxuICAgICAgXCJzbWFydHR2XCIsXG4gICAgICBcImludGVybmV0LnR2XCIsXG4gICAgICBcIm5ldGNhc3RcIixcbiAgICAgIFwibmV0dHZcIixcbiAgICAgIFwiYXBwbGV0dlwiLFxuICAgICAgXCJib3hlZVwiLFxuICAgICAgXCJreWxvXCIsXG4gICAgICBcInJva3VcIixcbiAgICAgIFwiZGxuYWRvY1wiLFxuICAgICAgXCJyb2t1XCIsXG4gICAgICBcInBvdl90dlwiLFxuICAgICAgXCJoYmJ0dlwiLFxuICAgICAgXCJjZS1odG1sXCJcbiAgICBdO1xuXG4gICAgaSA9IDA7XG4gICAgd2hpbGUgKGkgPCB0ZWxldmlzaW9uLmxlbmd0aCkge1xuICAgICAgaWYgKGZpbmQodGVsZXZpc2lvbltpXSkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICBpKys7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICBkZXZpY2UucG9ydHJhaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuICh3aW5kb3cuaW5uZXJIZWlnaHQgLyB3aW5kb3cuaW5uZXJXaWR0aCkgPiAxO1xuICB9O1xuXG4gIGRldmljZS5sYW5kc2NhcGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuICh3aW5kb3cuaW5uZXJIZWlnaHQgLyB3aW5kb3cuaW5uZXJXaWR0aCkgPCAxO1xuICB9O1xuXG4gIC8vIFB1YmxpYyBVdGlsaXR5IEZ1bmN0aW9uc1xuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICAvLyBSdW4gZGV2aWNlLmpzIGluIG5vQ29uZmxpY3QgbW9kZSxcbiAgLy8gcmV0dXJuaW5nIHRoZSBkZXZpY2UgdmFyaWFibGUgdG8gaXRzIHByZXZpb3VzIG93bmVyLlxuICBkZXZpY2Uubm9Db25mbGljdCA9IGZ1bmN0aW9uICgpIHtcbiAgICB3aW5kb3cuZGV2aWNlID0gcHJldmlvdXNEZXZpY2U7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLy8gUHJpdmF0ZSBVdGlsaXR5IEZ1bmN0aW9uc1xuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgLy8gU2ltcGxlIFVBIHN0cmluZyBzZWFyY2hcbiAgZmluZCA9IGZ1bmN0aW9uIChuZWVkbGUpIHtcbiAgICByZXR1cm4gdXNlckFnZW50LmluZGV4T2YobmVlZGxlKSAhPT0gLTE7XG4gIH07XG5cbiAgLy8gQ2hlY2sgaWYgZG9jdW1lbnRFbGVtZW50IGFscmVhZHkgaGFzIGEgZ2l2ZW4gY2xhc3MuXG4gIGhhc0NsYXNzID0gZnVuY3Rpb24gKGNsYXNzTmFtZSkge1xuICAgIHZhciByZWdleDtcbiAgICByZWdleCA9IG5ldyBSZWdFeHAoY2xhc3NOYW1lLCAnaScpO1xuICAgIHJldHVybiBkb2N1bWVudEVsZW1lbnQuY2xhc3NOYW1lLm1hdGNoKHJlZ2V4KTtcbiAgfTtcblxuICAvLyBBZGQgb25lIG9yIG1vcmUgQ1NTIGNsYXNzZXMgdG8gdGhlIDxodG1sPiBlbGVtZW50LlxuICBhZGRDbGFzcyA9IGZ1bmN0aW9uIChjbGFzc05hbWUpIHtcbiAgICB2YXIgY3VycmVudENsYXNzTmFtZXMgPSBudWxsO1xuICAgIGlmICghaGFzQ2xhc3MoY2xhc3NOYW1lKSkge1xuICAgICAgY3VycmVudENsYXNzTmFtZXMgPSBkb2N1bWVudEVsZW1lbnQuY2xhc3NOYW1lLnJlcGxhY2UoL15cXHMrfFxccyskL2csICcnKTtcbiAgICAgIGRvY3VtZW50RWxlbWVudC5jbGFzc05hbWUgPSBjdXJyZW50Q2xhc3NOYW1lcyArIFwiIFwiICsgY2xhc3NOYW1lO1xuICAgIH1cbiAgfTtcblxuICAvLyBSZW1vdmUgc2luZ2xlIENTUyBjbGFzcyBmcm9tIHRoZSA8aHRtbD4gZWxlbWVudC5cbiAgcmVtb3ZlQ2xhc3MgPSBmdW5jdGlvbiAoY2xhc3NOYW1lKSB7XG4gICAgaWYgKGhhc0NsYXNzKGNsYXNzTmFtZSkpIHtcbiAgICAgIGRvY3VtZW50RWxlbWVudC5jbGFzc05hbWUgPSBkb2N1bWVudEVsZW1lbnQuY2xhc3NOYW1lLnJlcGxhY2UoXCIgXCIgKyBjbGFzc05hbWUsIFwiXCIpO1xuICAgIH1cbiAgfTtcblxuICAvLyBIVE1MIEVsZW1lbnQgSGFuZGxpbmdcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgLy8gSW5zZXJ0IHRoZSBhcHByb3ByaWF0ZSBDU1MgY2xhc3MgYmFzZWQgb24gdGhlIF91c2VyX2FnZW50LlxuXG4gIGlmIChkZXZpY2UuaW9zKCkpIHtcbiAgICBpZiAoZGV2aWNlLmlwYWQoKSkge1xuICAgICAgYWRkQ2xhc3MoXCJpb3MgaXBhZCB0YWJsZXRcIik7XG4gICAgfSBlbHNlIGlmIChkZXZpY2UuaXBob25lKCkpIHtcbiAgICAgIGFkZENsYXNzKFwiaW9zIGlwaG9uZSBtb2JpbGVcIik7XG4gICAgfSBlbHNlIGlmIChkZXZpY2UuaXBvZCgpKSB7XG4gICAgICBhZGRDbGFzcyhcImlvcyBpcG9kIG1vYmlsZVwiKTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoZGV2aWNlLmFuZHJvaWQoKSkge1xuICAgIGlmIChkZXZpY2UuYW5kcm9pZFRhYmxldCgpKSB7XG4gICAgICBhZGRDbGFzcyhcImFuZHJvaWQgdGFibGV0XCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBhZGRDbGFzcyhcImFuZHJvaWQgbW9iaWxlXCIpO1xuICAgIH1cbiAgfSBlbHNlIGlmIChkZXZpY2UuYmxhY2tiZXJyeSgpKSB7XG4gICAgaWYgKGRldmljZS5ibGFja2JlcnJ5VGFibGV0KCkpIHtcbiAgICAgIGFkZENsYXNzKFwiYmxhY2tiZXJyeSB0YWJsZXRcIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGFkZENsYXNzKFwiYmxhY2tiZXJyeSBtb2JpbGVcIik7XG4gICAgfVxuICB9IGVsc2UgaWYgKGRldmljZS53aW5kb3dzKCkpIHtcbiAgICBpZiAoZGV2aWNlLndpbmRvd3NUYWJsZXQoKSkge1xuICAgICAgYWRkQ2xhc3MoXCJ3aW5kb3dzIHRhYmxldFwiKTtcbiAgICB9IGVsc2UgaWYgKGRldmljZS53aW5kb3dzUGhvbmUoKSkge1xuICAgICAgYWRkQ2xhc3MoXCJ3aW5kb3dzIG1vYmlsZVwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYWRkQ2xhc3MoXCJkZXNrdG9wXCIpO1xuICAgIH1cbiAgfSBlbHNlIGlmIChkZXZpY2UuZnhvcygpKSB7XG4gICAgaWYgKGRldmljZS5meG9zVGFibGV0KCkpIHtcbiAgICAgIGFkZENsYXNzKFwiZnhvcyB0YWJsZXRcIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGFkZENsYXNzKFwiZnhvcyBtb2JpbGVcIik7XG4gICAgfVxuICB9IGVsc2UgaWYgKGRldmljZS5tZWVnbygpKSB7XG4gICAgYWRkQ2xhc3MoXCJtZWVnbyBtb2JpbGVcIik7XG4gIH0gZWxzZSBpZiAoZGV2aWNlLm5vZGVXZWJraXQoKSkge1xuICAgIGFkZENsYXNzKFwibm9kZS13ZWJraXRcIik7XG4gIH0gZWxzZSBpZiAoZGV2aWNlLnRlbGV2aXNpb24oKSkge1xuICAgIGFkZENsYXNzKFwidGVsZXZpc2lvblwiKTtcbiAgfSBlbHNlIGlmIChkZXZpY2UuZGVza3RvcCgpKSB7XG4gICAgYWRkQ2xhc3MoXCJkZXNrdG9wXCIpO1xuICB9XG5cbiAgaWYgKGRldmljZS5jb3Jkb3ZhKCkpIHtcbiAgICBhZGRDbGFzcyhcImNvcmRvdmFcIik7XG4gIH1cblxuICAvLyBPcmllbnRhdGlvbiBIYW5kbGluZ1xuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gIC8vIEhhbmRsZSBkZXZpY2Ugb3JpZW50YXRpb24gY2hhbmdlcy5cbiAgaGFuZGxlT3JpZW50YXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKGRldmljZS5sYW5kc2NhcGUoKSkge1xuICAgICAgcmVtb3ZlQ2xhc3MoXCJwb3J0cmFpdFwiKTtcbiAgICAgIGFkZENsYXNzKFwibGFuZHNjYXBlXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZW1vdmVDbGFzcyhcImxhbmRzY2FwZVwiKTtcbiAgICAgIGFkZENsYXNzKFwicG9ydHJhaXRcIik7XG4gICAgfVxuICAgIHJldHVybjtcbiAgfTtcblxuICAvLyBEZXRlY3Qgd2hldGhlciBkZXZpY2Ugc3VwcG9ydHMgb3JpZW50YXRpb25jaGFuZ2UgZXZlbnQsXG4gIC8vIG90aGVyd2lzZSBmYWxsIGJhY2sgdG8gdGhlIHJlc2l6ZSBldmVudC5cbiAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh3aW5kb3csIFwib25vcmllbnRhdGlvbmNoYW5nZVwiKSkge1xuICAgIG9yaWVudGF0aW9uRXZlbnQgPSBcIm9yaWVudGF0aW9uY2hhbmdlXCI7XG4gIH0gZWxzZSB7XG4gICAgb3JpZW50YXRpb25FdmVudCA9IFwicmVzaXplXCI7XG4gIH1cblxuICAvLyBMaXN0ZW4gZm9yIGNoYW5nZXMgaW4gb3JpZW50YXRpb24uXG4gIGlmICh3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcikge1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKG9yaWVudGF0aW9uRXZlbnQsIGhhbmRsZU9yaWVudGF0aW9uLCBmYWxzZSk7XG4gIH0gZWxzZSBpZiAod2luZG93LmF0dGFjaEV2ZW50KSB7XG4gICAgd2luZG93LmF0dGFjaEV2ZW50KG9yaWVudGF0aW9uRXZlbnQsIGhhbmRsZU9yaWVudGF0aW9uKTtcbiAgfSBlbHNlIHtcbiAgICB3aW5kb3dbb3JpZW50YXRpb25FdmVudF0gPSBoYW5kbGVPcmllbnRhdGlvbjtcbiAgfVxuXG4gIGhhbmRsZU9yaWVudGF0aW9uKCk7XG5cbiAgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIGRlZmluZS5hbWQgPT09ICdvYmplY3QnICYmIGRlZmluZS5hbWQpIHtcbiAgICBkZWZpbmUoZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gZGV2aWNlO1xuICAgIH0pO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnICYmIG1vZHVsZS5leHBvcnRzKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBkZXZpY2U7XG4gIH0gZWxzZSB7XG4gICAgd2luZG93LmRldmljZSA9IGRldmljZTtcbiAgfVxuXG59KS5jYWxsKHRoaXMpOyJdfQ==
